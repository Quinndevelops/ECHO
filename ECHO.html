<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECHO</title>
    <style>
         #time {
            font-size: 10px;
            font-family: sans-serif;      margin-top: 20px;
            text align: center;
            display: flex;
        }/* Splash screen styles */
        #splash {
            display: flex;
            flex-direction: column;     align-items: center;
            padding: 20px;
            border: 1px solid #1c1c1d;    background-color: #1c1c1d;
        }

        #passwordInput {
            margin-bottom: 10px;
        }

        body {
            background-color: #1C1C1D; /* Updated background color */
            color: #fff; /* White text color */
            font-family: sans-serif;
            overflow: hidden; /* Hide overflow to prevent scrolling during splash */
        }

        h1, h2, h3, h4, h5, h6, p, input, button {
            color: #fff; /* White text color */
		text-align: center;
        }

       .search {
    background-color: #3478F5;
    border-radius: 10px;
    border: 1px solid #1c1c1d;
    box-sizing: border-box;
    padding: 5px;
    margin: 3px;
    height: auto;
    width: auto;
    font-size: 16px;
    display: inline-block;
    text-align: center;
}
        href {
           
    background-color: #3478F5;
    border-radius: 10px;
    border: 1px solid #1c1c1d;
    box-sizing: border-box;
    padding: 5px;
    margin: 3px;
    height: auto;
    width: auto;
    font-size: 16px;
    display: inline-block;
    text-align: center; }

        input {
            padding: 5px;
            border: 1px solid #1c1c1d;
            border-radius: 10px;
            box-sizing: border-box;
            font-size: 16px;
            margin: 3px;
            height: auto;
            width: auto;
            background-color: #6F7073;
        }
   

        .back-button {
            background-color: #1c1c1d;
            border-radius: 10px;
            border: 1px solid #1c1c1d; /* Corrected border property */
            box-sizing: border-box;
            padding: 5px;
            margin: 3px;
            height: auto;
            width: auto;
            font-size: 16px;
        }
        .password-splash{
            background-color: #6F7073;    height: auto;
            width: auto;
            font-size: 16px;}
        
        .submit{
            background-color: #3478F7;    border-radius: 10px;
            border: 1px solid #1c1c1d;    box-sizing: border-box;        padding: 5px;
            margin: 3px;
            height: auto;
            width: auto;
            font-size: 16px;
            display: inline-block;      text-align: center;}

        .dropdown {
            background-color: #1c1c1d;    border-radius: 10px;
            border: 1px solid
#1c1c1d;    box-sizing: border-box;        height: auto; 
            width: auto;
            font-size: 16px;
            text-color: #3478F5;
            position: absolute;
            top: 10px;
            right: 10px;
            display: inline-block;
}

        .about {
            text-align: center;

}

        #result {
            margin-top: 10px;
            overflow-y: auto; /* Enable vertical scrollbar if needed */
            max-height: 300px; /* Set a maximum height for the result div */
            white-space: pre-wrap; /* Preserve line breaks */
            text-align: center;
            font-size: 20px;
        }

         #result::after {
        content: ''; /* Use any character you want for the cursor */
        animation: cursor-blink 0.6s infinite; /* Adjust the animation duration as needed */
        display: inline-block;
    }

    @keyframes cursor-blink {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0;
        }
    }
        #images {
            margin-top: 20px;
            text-align: center;
        }

        #images h2 {
            color: #fff; /* White text color */
        }

        #images img {
            max-width: 100%;
            height: auto;
            margin-bottom: 10px;
            img-align: center;
        }
    </style>
</head>
<body>
    <!-- Splash screen -->
    <div id="splash">
        <h1>Welcome</h1>
	    <h3>1776</h3>
        <input type="password" inputmode="numeric" placeholder="password" id="passwordInput">
        <button onclick="checkPassword()" class="submit">Submit</button>
    </div>

    <!-- Main content -->
    <div id="contentSection" style="display: none;">
        <button onclick="restartCode()" class="back-button">Back</button> 
		<select class="dropdown" onchange="selectOption(this)">
			<option>Article Finder</option>
			<option>About Section</option>
		</select>
        <h1 style="text-align: center;">ECHO</h1>
        <div style="text-align: center;">
            <input type="text" id="searchInput" placeholder="Enter article title">
        </div>
        <div style="text-align: center;">
            <button onclick="searchArticle()" class="search">Search</button>
        </div> <div id="result"></div>
<div id="images">
    <h2 style="text-align: center;">Images</h2>
    <!-- Images will be displayed here -->
</div>

</div>
       <!-- About section -->
<div id="aboutSection"   style="display: none;"  style="text-align: center;">
 <button onclick="restartCode()" class="back-button">Back</button> <div class="about">
<select class="dropdown" onchange="selectOption(this)">
			<option>About Section</option>
			<option>Article Finder</option>
		</select>
    <h1>About ECHO</h1>
    <p>ECHO is a Tool where you can look up information, ECHO will hunt it for you via wikipedia.</p> <h1>Version</h1> <p>V1.2</p> <p>Thanks for using ECHO</p> <h2>Report any bugs at quinndevfacthound@gmail.com</h2> <a href="mailto:quinndevfacthound@gmail.com">Compose Email Here</a>

</div></div>
       
            
            <!-- Images will be displayed here -->

    <script>
        function checkPassword() {
    var password = document.getElementById("passwordInput").value;

    // Check if the entered password is a number
    if (!isNaN(password) && password !== "") {
        
        if (parseInt(password) === 1776) {
            document.getElementById("splash").style.display = "none";
            document.getElementById("contentSection").style.display = 'block';
        } else {
            alert("Incorrect password. Try again.");
        }
    } else {
        alert("Please enter a numeric password.");
    }
}
        
function selectOption(dropdown) {
    const selectedOption = dropdown.options[dropdown.selectedIndex].text;
    const contentSection = document.getElementById('contentSection');
    const aboutSection = document.getElementById('aboutSection');

    if (selectedOption === 'About Section') {
        contentSection.style.display = 'none';
        aboutSection.style.display = 'block';
    } else {
        contentSection.style.display = 'block';
        aboutSection.style.display = 'none';
    }

    // Additional check to handle the About Section display issue
    if (selectedOption === 'About Section' && aboutSection.style.display !== 'block') {
        aboutSection.style.display = 'block';
    }
}


// Variable to store the currently running animation
        let currentAnimation;

        // Remaining script (unchanged)
        function searchArticle() {
            // Clear previous animation if running
            if (currentAnimation) {
                clearInterval(currentAnimation);
            }

            const originalInput = document.getElementById('searchInput').value;
            const formattedInput = originalInput.replace(/\s/g, '_'); // Replace spaces with underscores
            const apiUrlOriginal = `https://en.wikipedia.org/w/api.php?action=query&format=json&prop=extracts|pageimages&exintro=true&titles=${formattedInput}&pithumbsize=300&origin=*`;

            const lowercaseInput = originalInput.toLowerCase();
            const formattedLowercaseInput = lowercaseInput.replace(/\s/g, '_');
            const apiUrlLowercase = `https://en.wikipedia.org/w/api.php?action=query&format=json&prop=extracts|pageimages&exintro=true&titles=${formattedLowercaseInput}&pithumbsize=300&origin=*`;

            // Function to sanitize HTML content
            function sanitizeHTML(html) {
                const doc = new DOMParser().parseFromString(html, 'text/html');
                return doc.body.textContent || "";
            }

            // Function to handle API response with typewriter animation
            function handleResponseWithTypewriter(data) {
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = '';

                const page = data.query.pages;
                const firstPageId = Object.keys(page)[0];

                if (firstPageId === '-1' || !page[firstPageId].hasOwnProperty('extract')) {
                    throw new Error('Article not found');
                }

                const extract = sanitizeHTML(page[firstPageId].extract);
                const characters = extract.split('');

                let currentIndex = 0;

                // Display characters with typewriter effect
                currentAnimation = setInterval(() => {
                    if (currentIndex < characters.length) {
                        resultDiv.innerHTML += characters[currentIndex];
                        // Scroll to the bottom as text appears
                        resultDiv.scrollTop = resultDiv.scrollHeight;
                        currentIndex++;
                    } else {
                        clearInterval(currentAnimation);
                    }
                }, 1);

                // Display images
                const imagesContainer = document.getElementById('images');
                imagesContainer.innerHTML = '';

                if (page[firstPageId].hasOwnProperty('thumbnail')) {
                    const image = document.createElement('img');
                    image.src = page[firstPageId].thumbnail.source;
                    imagesContainer.appendChild(image);
                }

                // Display "Images" label only if images are present
                if (imagesContainer.hasChildNodes()) {
                    const imagesLabel = document.createElement('h2');
                    imagesLabel.textContent = 'Images';
                    imagesContainer.insertBefore(imagesLabel, imagesContainer.firstChild);
                }
            }

            // Attempt with original input
            fetch(apiUrlOriginal)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => handleResponseWithTypewriter(data))
                .catch(() => {
                    // If the original request fails, try with lowercase input (unchanged part)
                });
        }
function restartCode() {
    location.reload();
}
function updateTime() {
        var currentTime = new Date();
        var hours = currentTime.getHours();
        var minutes = currentTime.getMinutes();
        var seconds = currentTime.getSeconds();
        var meridiem = "AM";

        // Convert to 12-hour format
        if (hours > 12) {
            hours -= 12;
            meridiem = "PM";
        }

        // Add leading zero if single digit
        hours = (hours < 10) ? "0" + hours : hours;
        minutes = (minutes < 10) ? "0" + minutes : minutes;
        seconds = (seconds < 10) ? "0" + seconds : seconds;

        var timeString = hours + ":" + minutes + ":" + seconds + " " + meridiem;
        document.getElementById("time").innerHTML = timeString;
    }

    // Update time every second
    setInterval(updateTime, 1000);

    // Initial call to display time immediately
    updateTime();

    </script>
</body>
</html>
